@if (isAuthenticated) {
  <app-side-menu></app-side-menu>
  @if (showScheduledTasks) {
    <div class="table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>Sync Job</th>
            <th>Cron Expression</th>
            <th>Status</th>
            <th>Last run</th>
            <th>Next scheduled run</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let t of tasks$ | async">
            <td>{{ t.name }}</td>
            <td>
              <code>{{ t.cronExpression || '-' }}</code>
            </td>
            <td>
              {{ t.status }}
            </td>
            <td>
              <p class="text-primary m-0 created-date-column">
                {{ t.lastStart | date: 'short' }}
              </p>
            </td>
            <td>
              <p class="text-primary m-0 created-date-column">
                {{ t.nextExecution | date: 'short' }}
              </p>
            </td>
            <td class="action-buttons fixed-width">
              <div id="sync-button">
                <p
                  class="mb-0 text-center"
                  [lang]="languageService.selectedLanguage()">
                  {{ 'common.approval.approveBtnLabel' | translate }}
                </p>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <!-- <p *ngIf="(tasks$ | async)?.length === 0">No task data yet.</p> -->
      <!-- <p class="small text-muted">Auto-refresh every {{ refreshMs/1000 }}s.</p> -->
    </div>
  }
  <router-outlet></router-outlet>
} @else {
  <div class="token-container">
    <div class="header">
      <h2 class="text-primary text-center">
        {{ 'common.approval.pageTitle' | translate }}
      </h2>
      <h3 class="text-primary text-center">
        {{ 'common.approval.description' | translate }}
      </h3>
    </div>
    <div class="token-input-container">
      <h3 class="text-primary">
        {{ 'common.approval.enterToken' | translate }}
      </h3>
      <div>
        <input
          id="token-input"
          type="password"
          [(ngModel)]="token"
          [attr.placeholder]="
            'common.approval.enterTokenPlaceholder' | translate
          " />
        <button
          class="btn-primary"
          (click)="onSubmit()"
          [ngClass]="themeService.isDarkMode() ? 'text-dark' : 'text-light'">
          {{ 'common.approval.proceedBtnLabel' | translate }}
        </button>
        @if (errorMessage) {
          <div class="error-message">{{ errorMessage }}</div>
        }
      </div>
    </div>
    <!-- <app-loading-spinner
      containerClasses="d-flex justify-content-center position-fixed align-items-center top-0 end-0 bottom-0 start-0 rounded overlay-background z-1"
      [key]="LoadingComponentId.FEEDBACK_APPROVAL" /> -->
  </div>
}
